# DRAM Column Addressì™€ Burst Length ì™„ë²½ ê°€ì´ë“œ

## ğŸ“Œ ëª©ì°¨

1. [DRAMì˜ ê¸°ë³¸ êµ¬ì¡°](#dramì˜-ê¸°ë³¸-êµ¬ì¡°)
2. [DRAM Read/Write ë™ì‘ ê³¼ì •](#dram-readwrite-ë™ì‘-ê³¼ì •)
3. [Burst Lengthë€?](#burst-lengthë€)
4. [Column Addressì˜ ì‹¤ì œ ì˜ë¯¸](#column-addressì˜-ì‹¤ì œ-ì˜ë¯¸)
5. [Bank Group Interleaving](#bank-group-interleaving)
6. [CMM-Dì˜ Column Address ì¸ì½”ë”©](#cmm-dì˜-column-address-ì¸ì½”ë”©)
7. [ì‹¤ì œ ì˜ˆì‹œë¡œ ì´í•´í•˜ê¸°](#ì‹¤ì œ-ì˜ˆì‹œë¡œ-ì´í•´í•˜ê¸°)
8. [ì™œ ì´ë ‡ê²Œ ë³µì¡í•œê°€?](#ì™œ-ì´ë ‡ê²Œ-ë³µì¡í•œê°€)

---

## DRAMì˜ ê¸°ë³¸ êµ¬ì¡°

### DRAM Cell Array êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        DRAM Chip                â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Bank Group 0          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚  Bank 0            â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  Row 0: [Cell Array]â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  Row 1: [Cell Array]â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  ...                â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  Row 131071:        â”‚ â”‚   â”‚
â”‚  â”‚  â”‚       [Cell Array]  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  ê° Row = 2048 cols â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚  Bank 1, 2, 3 ...      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  Bank Group 1-7 ...            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í•µì‹¬ ê°œë…

**1. Row (í–‰)**
- í•˜ë‚˜ì˜ row = ìˆ˜ì²œ ê°œì˜ DRAM cell ë°°ì—´
- CMM-D: 1 row = 2048 columns (0x800)
- Row activate ì‹œ ì „ì²´ rowê°€ sense amplifierë¡œ ë³µì‚¬ë¨

**2. Column (ì—´)**
- Row ë‚´ì—ì„œ íŠ¹ì • ë°ì´í„° ìœ„ì¹˜ ì§€ì •
- BUT! ë‹¨ì¼ ë°”ì´íŠ¸ê°€ ì•„ë‹˜ (ì¤‘ìš”!)

**3. Sense Amplifier**
- Rowì˜ ë°ì´í„°ë¥¼ ì„ì‹œ ì €ì¥í•˜ëŠ” ë²„í¼
- ì—¬ê¸°ì„œ ì‹¤ì œ read/write ë°œìƒ

---

## DRAM Command Truth Table

### DDR5 Command Encoding

DRAMì€ ì—¬ëŸ¬ ê°œì˜ ì‹ í˜¸ì„ (CA - Command/Address)ì„ í†µí•´ ëª…ë ¹ì„ ë°›ìŠµë‹ˆë‹¤.

#### CA (Command/Address) ì‹ í˜¸

```
DDR5 DRAM Command Interface:
- CA[13:0]: 14ê°œ CA ì‹ í˜¸ì„ 
- CS_n: Chip Select (Low active)
- CKE: Clock Enable

ê° ëª…ë ¹ì€ CA ì‹ í˜¸ì˜ ì¡°í•©ìœ¼ë¡œ ì¸ì½”ë”©ë¨
```

#### ì£¼ìš” DRAM ëª…ë ¹ì–´ Truth Table

| ëª…ë ¹ | CA13 | CA12 | CA11 | CA10 | CA9 | CA8 | CA7 | CA6 | CA5 | CA4 | CA3 | CA2 | CA1 | CA0 | ì„¤ëª… |
|------|------|------|------|------|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|------|
| **ACT** | L | L | H | RH | R | R | R | R | BG | BG | BG | BA | BA | AB | Row Activate |
| **RD** | H | L | H | L | AP | L | BL | L | BG | BG | BG | BA | BA | C | Read |
| **WR** | H | L | H | H | AP | L | BL | L | BG | BG | BG | BA | BA | C | Write |
| **PRE** | L | H | L | L | AP | AB | L | L | BG | BG | BG | BA | BA | L | Precharge |
| **REF** | L | H | H | L | L | L | L | L | L | L | L | L | L | L | Refresh |

**ë²”ë¡€:**
- **L**: Low (0)
- **H**: High (1)
- **R**: Row address bit
- **BG**: Bank Group address
- **BA**: Bank address
- **C**: Column address bit
- **AP**: Auto Precharge
- **BL**: Burst Length
- **AB**: All Banks

### ACT (Activate) ëª…ë ¹ ìƒì„¸

```
ACT ëª…ë ¹ = "íŠ¹ì • Rowë¥¼ Sense Amplifierë¡œ ë³µì‚¬"

Encoding:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CA[13:7] = Row Address[16:10]              â”‚
â”‚ CA[6:4]  = Bank Group[2:0]                 â”‚
â”‚ CA[3:2]  = Bank Address[1:0]               â”‚
â”‚ CA[1:0]  = Row Address[1:0]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì˜ˆì‹œ: Row=0x1234, BG=5, BA=2
  Row = 0001 0010 0011 0100 (binary)
  BG  = 101 (binary)
  BA  = 10 (binary)

CA[13:0] = [0 0 1 0 0 1 0 0 | 1 0 1 | 1 0 | 0 0]
            â””â”€ Row[16:10] â”€â”˜  â””BGâ”˜  â””BAâ”˜ â””R1:0â”˜
```

### RD (Read) ëª…ë ¹ ìƒì„¸

```
RD ëª…ë ¹ = "Column ì£¼ì†Œì—ì„œ Burst ì½ê¸°"

Encoding:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CA[13]   = 1 (Read ì‹ë³„)                   â”‚
â”‚ CA[12]   = 0                               â”‚
â”‚ CA[11]   = 1                               â”‚
â”‚ CA[10]   = 0                               â”‚
â”‚ CA[9]    = Auto Precharge                  â”‚
â”‚ CA[7]    = Burst Length on-the-fly         â”‚
â”‚ CA[6:4]  = Bank Group[2:0]                 â”‚
â”‚ CA[3:2]  = Bank Address[1:0]               â”‚
â”‚ CA[1:0]  = Column Address (low bits)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì£¼ì˜: Column addressëŠ” ì—¬ëŸ¬ cycleì— ê±¸ì³ ì „ì†¡ë¨!
```

### Column Address ì „ì†¡ ë°©ì‹

DDR5ì—ì„œ Column addressëŠ” **2ê°œ cycle**ì— ê±¸ì³ ì „ì†¡:

```
Cycle 0 (RD ëª…ë ¹ê³¼ í•¨ê»˜):
  CA[1:0] = Column[1:0]

Cycle 1 (ë‹¤ìŒ í´ëŸ­):
  CA[9:0] = Column[11:2]

ì „ì²´ Column Address = {CA_cycle1[9:0], CA_cycle0[1:0]}
                     = 12 bits (0-4095)
```

**í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ”:**
```
DDR5 Burst Length = 16
â†’ Column[3:0]ëŠ” burst ë‚´ ìœ„ì¹˜ (ìë™ ì¦ê°€)
â†’ ìœ íš¨ Column bits = Column[11:4] (8 bits)
â†’ 256ê°œ column ì„ íƒ ê°€ëŠ¥

ì‹¤ì œ ì ‘ê·¼ ê°€ëŠ¥ column:
0x00, 0x10, 0x20, ..., 0xFF0
(16ì˜ ë°°ìˆ˜)
```

## DRAM Read/Write ë™ì‘ ê³¼ì •

### Step-by-Step ì„¤ëª…

#### 1ë‹¨ê³„: Row Activate (ACT ëª…ë ¹)

**Truth Table ì ìš©:**

```
ëª…ë ¹: ACTIVATE Row=100, BG=2, BA=1

1. Command Encoding (CA ì‹ í˜¸):
   Row 100 = 0x64 = 0000 0000 0110 0100 (binary)
   BG 2    = 010 (binary)
   BA 1    = 01 (binary)

   CA[13:0] = [0 0 0 0 0 0 0 0 | 0 1 0 | 0 1 | 0 0]

2. DRAM Chip ìˆ˜ì‹ :
   CA ì‹ í˜¸ ë””ì½”ë”©
   â†’ "ACT, Row=100, BG=2, BA=1" ì¸ì‹

3. ë‚´ë¶€ ë™ì‘:

```
ëª…ë ¹: ACTIVATE Row=100

DRAM ë‚´ë¶€ ë™ì‘:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Row 100ì˜ ëª¨ë“  2048 columns      â”‚
â”‚ â†“ ë³µì‚¬                           â”‚
â”‚ Sense Amplifier Buffer           â”‚
â”‚ [Col 0][Col 1]...[Col 2047]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì‹œê°„: ~15ns
ì „ë ¥: ë†’ìŒ (ì „ì²´ row í™œì„±í™”)
```

**ì¤‘ìš”**: Row activateëŠ” **ì „ì²´ row**ë¥¼ í•œ ë²ˆì— í™œì„±í™”í•©ë‹ˆë‹¤!

#### 2ë‹¨ê³„: Column Read (RD ëª…ë ¹)

**Truth Table ì ìš©:**

```
ëª…ë ¹: READ Column=0x10, BG=2, BA=1

1. Command Encoding (CA ì‹ í˜¸):
   Column 0x10 = 0001 0000 (binary)
   BG 2        = 010 (binary)
   BA 1        = 01 (binary)

   Cycle 0 (RD ëª…ë ¹):
   CA[13] = 1 (READ ëª…ë ¹)
   CA[12] = 0
   CA[11] = 1
   CA[10] = 0
   CA[9]  = 0 (Auto Precharge off)
   CA[7]  = 0 (Burst Length = 16)
   CA[6:4] = 010 (BG=2)
   CA[3:2] = 01 (BA=1)
   CA[1:0] = 00 (Column[1:0])

   Cycle 1 (Column address):
   CA[9:0] = Column[11:2] = 0000000001

2. DRAM Chip ìˆ˜ì‹ :
   CA ì‹ í˜¸ ë””ì½”ë”©
   â†’ "READ, BG=2, BA=1, Col=0x10" ì¸ì‹

3. ë‚´ë¶€ ë™ì‘:
```

**ê¸°ëŒ€ vs ì‹¤ì œ:**

```
ê¸°ëŒ€: "Column 0x10ì˜ 1ë°”ì´íŠ¸ë§Œ ì½ê¸°?"
ì‹¤ì œ: "Column 0x10ë¶€í„° ì—°ì†ëœ ì—¬ëŸ¬ ë°ì´í„° ì½ê¸°!" â† Burst!

Burst ë™ì‘:
  Sense Amplifierì—ì„œ ìë™ìœ¼ë¡œ ì—°ì† ì „ì†¡
  Col 0x10 â†’ 0x11 â†’ 0x12 â†’ ... â†’ 0x1F (16 transfers)
  ì´ 128 bytes ì „ì†¡!
```

### ì™œ Burstì¸ê°€?

**ë¬¸ì œ ìƒí™©:**
```
Row activate = 15ns (ëŠë¦¼, ì „ë ¥ ë§ì´ ì†Œëª¨)
Column read = 2ns (ë¹ ë¦„, ì „ë ¥ ì ê²Œ ì†Œëª¨)

ë§Œì•½ 1ë°”ì´íŠ¸ë§Œ ì½ê³  ëë‚¸ë‹¤ë©´?
â†’ 15ns ê±¸ë ¤ì„œ row í™œì„±í™”í–ˆëŠ”ë° 2nsë§Œ ì“°ê³  ë²„ë¦¼
â†’ ì—„ì²­ë‚œ ë‚­ë¹„!
```

**í•´ê²°ì±…: Burst Transfer**
```
Row í•œ ë²ˆ activateí•˜ë©´
â†’ ì—°ì†ëœ ì—¬ëŸ¬ column ë°ì´í„°ë¥¼ í•œêº¼ë²ˆì— ì½ì!
â†’ íš¨ìœ¨ì„± ê·¹ëŒ€í™”!
```

---

## Burst Lengthë€?

### ì •ì˜

**Burst Length (BL)**: í•œ ë²ˆì˜ read/write ëª…ë ¹ìœ¼ë¡œ ì „ì†¡ë˜ëŠ” **ì—°ì†ëœ ë°ì´í„°ì˜ ê°œìˆ˜**

### DDR5 DRAMì˜ Burst Length

```
DDR5 Specification:
- Burst Length = 16 (ê³ ì •)
- 1 transfer = 8 bytes (64 bits)
- 1 burst = 16 transfers Ã— 8 bytes = 128 bytes
```

### Burst ë™ì‘ ì˜ˆì‹œ

```
ëª…ë ¹: READ Column=0x10, BL=16

Sense Amplifierì—ì„œ ì½íˆëŠ” ìˆœì„œ:
Transfer 0:  Column 0x10 â†’ 8 bytes
Transfer 1:  Column 0x11 â†’ 8 bytes
Transfer 2:  Column 0x12 â†’ 8 bytes
...
Transfer 15: Column 0x1F â†’ 8 bytes

ì´ ì „ì†¡ëŸ‰: 16 Ã— 8 = 128 bytes
```

### ì‹œê°í™”

```
Column Address: 0x10 ì§€ì •
                â†“
Sense Amplifier Buffer:
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚0x10â”‚0x11â”‚0x12â”‚0x13â”‚0x14â”‚0x15â”‚...â”‚0x1Fâ”‚... â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
 â†‘                                    â†‘
 ì‹œì‘                              ë (BL=16)

â†’ 128 bytes í•œ ë²ˆì— ì „ì†¡!
```

---

## Column Addressì˜ ì‹¤ì œ ì˜ë¯¸

### Columnì€ "ë°”ì´íŠ¸ ì£¼ì†Œ"ê°€ ì•„ë‹ˆë‹¤!

ë§ì€ ì‚¬ëŒë“¤ì˜ ì˜¤í•´:
```
âŒ Column 0x10 = "10ë²ˆì§¸ ë°”ì´íŠ¸"
âŒ Column 0x11 = "11ë²ˆì§¸ ë°”ì´íŠ¸"
```

ì‹¤ì œ:
```
âœ… Column 0x10 = "128ë°”ì´íŠ¸ ë¸”ë¡ì˜ ì‹œì‘ì "
âœ… Column addressëŠ” "burstì˜ ì‹œì‘ ìœ„ì¹˜"ë¥¼ ê°€ë¦¬í‚´
```

### DDR5ì—ì„œì˜ Column Address ì˜ë¯¸

```
Column Address Encoding (DDR5):

Column[2:0] = Burst ë‚´ ìœ„ì¹˜ (8ê°œ, ì‚¬ìš© ì•ˆ í•¨)
Column[10:3] = ì‹¤ì œ column ì„ íƒ (256ê°œ ê°€ëŠ¥)

ì¦‰, ìœ íš¨í•œ column addressëŠ”:
0x00, 0x08, 0x10, 0x18, 0x20, ...
(8ì˜ ë°°ìˆ˜)
```

í•˜ì§€ë§Œ CMM-DëŠ” ë” íŠ¹ìˆ˜í•©ë‹ˆë‹¤! (ì•„ë˜ ì°¸ì¡°)

---

## Bank Group Interleaving

### Bank Groupì´ë€?

```
1ê°œ DRAM Chip:
â”œâ”€ Bank Group 0
â”‚  â”œâ”€ Bank 0
â”‚  â”œâ”€ Bank 1
â”‚  â”œâ”€ Bank 2
â”‚  â””â”€ Bank 3
â”œâ”€ Bank Group 1
â”‚  â””â”€ Bank 0-3
...
â””â”€ Bank Group 7
   â””â”€ Bank 0-3

CMM-D: 8 Bank Groups Ã— 4 Banks = 32 Banks
```

### Interleavingì´ë€?

**ì—°ì†ëœ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ì—¬ëŸ¬ bank groupì— ë¶„ì‚° ë°°ì¹˜**

ì˜ˆì‹œ:
```
DPA 0x0    â†’ BG 0
DPA 0x80   â†’ BG 1
DPA 0x100  â†’ BG 2
...
DPA 0x380  â†’ BG 7
DPA 0x400  â†’ BG 0 (ë‹¤ì‹œ ì²˜ìŒìœ¼ë¡œ)
```

### ì™œ Interleavingì„ í•˜ëŠ”ê°€?

**Bank Conflict ë°©ì§€**

```
ë¬¸ì œ:
ê°™ì€ bankì— ì—°ì† ì ‘ê·¼ â†’ ëŒ€ê¸° ì‹œê°„ ë°œìƒ (tRRD)

í•´ê²°:
ë‹¤ë¥¸ bankë¡œ ë¶„ì‚° â†’ ë™ì‹œ ì ‘ê·¼ ê°€ëŠ¥ â†’ ì„±ëŠ¥ í–¥ìƒ!

BG 0: [Read] â”€â”€â”€â”€â”€
BG 1:   [Read] â”€â”€â”€â”€â”€
BG 2:     [Read] â”€â”€â”€â”€â”€
       â†‘ íŒŒì´í”„ë¼ì¸ ì²˜ë¦¬ ê°€ëŠ¥!
```

---

## CMM-Dì˜ Column Address ì¸ì½”ë”©

### CMM-Dì˜ íŠ¹ìˆ˜í•œ ë§¤í•‘

```
ì¼ë°˜ DDR5: Column step = 0x8 (8 bytes)
CMM-D:     Column step = 0x10 (16 address ë‹¨ìœ„)

ì™œ? Bank Group Interleaving ë•Œë¬¸!
```

### ì‹¤ì œ ë§¤í•‘ ê·œì¹™

```
DPA ì¦ê°€ â†’ DRAM ì£¼ì†Œ ë³€í™”

DPA          Column    BG    í¬ê¸°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0x0          0x0       0
0x80         0x0       1     128 bytes (BG ë³€í™”)
0x100        0x0       2
...
0x380        0x0       7
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0x400        0x10      0     1KB (Column ë³€í™”!)
0x480        0x10      1
...
0x7C0        0x10      7
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0x800        0x20      0     2KB
...
```

### í•µì‹¬ ê³µì‹

```python
# DPA â†’ Column
col = (dpa % 0x20000) // 0x400 * 0x10

# ì„¤ëª…:
# 1. dpa % 0x20000: BA ë‚´ì—ì„œì˜ offset
# 2. // 0x400:      1KB ë‹¨ìœ„ë¡œ ë‚˜ëˆ”
# 3. * 0x10:        Column addressë¡œ ë³€í™˜

ì˜ˆì‹œ:
DPA = 0x400
â†’ (0x400 % 0x20000) // 0x400 * 0x10
â†’ 0x400 // 0x400 * 0x10
â†’ 1 * 0x10
â†’ 0x10 âœ“
```

### ì—­ë³€í™˜ (Column â†’ DPA)

```python
# Column â†’ DPA offset
dpa_offset = (col // 0x10) * 0x400

ì˜ˆì‹œ:
Column = 0x10
â†’ (0x10 // 0x10) * 0x400
â†’ 1 * 0x400
â†’ 0x400 âœ“
```

---

## ì‹¤ì œ ì˜ˆì‹œë¡œ ì´í•´í•˜ê¸°

### ì˜ˆì‹œ 1: devdax write 64 bytes

```python
# Python code
devdax.write(dpa=0x0, data=b'A' * 64)
```

**ì „ì²´ íë¦„: Application â†’ DRAM Chip**

```
Step 1: DPA ì£¼ì†Œ ë¶„ì„ (CXL Controller)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DPA 0x0 ë¶„ì„:
  row   = 0x0 // 0x100000 = 0
  subch = 0
  ba    = 0
  col   = 0x0
  bg    = 0
  dimm  = 0

â†’ DRAM Address: Row=0, BG=0, BA=0, Col=0x0


Step 2: DRAM Command ìƒì„±
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ëª…ë ¹ 1: ACT (Activate)
  CA ì‹ í˜¸:
    CA[13:7] = Row[16:10] = 0000000
    CA[6:4]  = BG[2:0]    = 000
    CA[3:2]  = BA[1:0]    = 00
    CA[1:0]  = Row[1:0]   = 00

ëª…ë ¹ 2: WR (Write)
  Cycle 0:
    CA[13]   = 1 (WRITE)
    CA[12]   = 0
    CA[11]   = 1
    CA[10]   = 1
    CA[9]    = 0 (Auto Precharge off)
    CA[7]    = 0 (BL=16)
    CA[6:4]  = BG = 000
    CA[3:2]  = BA = 00
    CA[1:0]  = Col[1:0] = 00

  Cycle 1:
    CA[9:0]  = Col[11:2] = 0000000000

  Data: 64 bytes ì „ì†¡ (í•˜ì§€ë§Œ burstë¡œ 128 bytes ì˜ì—­ ì‚¬ìš©)


Step 3: DRAM Chip ë‚´ë¶€ ë™ì‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. ACT ëª…ë ¹ ìˆ˜ì‹ 
   â†’ Row 0ì˜ 2048 columnsì„ Sense Amplifierë¡œ ë³µì‚¬
   â†’ ì‹œê°„: ~15ns

2. WR ëª…ë ¹ ìˆ˜ì‹ 
   â†’ Sense Amplifierì˜ Col 0x0ë¶€í„° ì‹œì‘
   â†’ Burstë¡œ Col 0x0~0x0Fì— ë°ì´í„° ì“°ê¸°
   â†’ 16 transfers Ã— 8 bytes = 128 bytes
   â†’ ì‹œê°„: ~10ns

3. ê²°ê³¼
   â†’ Row 0, Col 0x0~0x0F ì˜ì—­ì— ë°ì´í„° ì €ì¥
   â†’ ìš°ë¦¬ëŠ” 64 bytesë§Œ ë³´ëƒˆì§€ë§Œ
   â†’ Burst ë•Œë¬¸ì— 128 bytes ì˜ì—­ì— ì˜í–¥!
```

### ì˜ˆì‹œ 2: ì—°ì† ì“°ê¸°

```python
# 1KB ì“°ê¸°
for offset in range(0, 1024, 64):
    devdax.write(dpa=offset, data=b'B' * 64)
```

**DRAM ê´€ì :**

```
DPA 0x0   â†’ Row=0, BG=0, Col=0x0
DPA 0x40  â†’ Row=0, BG=0, Col=0x0 (ê°™ì€ burst!)
DPA 0x80  â†’ Row=0, BG=1, Col=0x0 (BG ë³€í™”)
DPA 0xC0  â†’ Row=0, BG=1, Col=0x0 (ê°™ì€ burst!)
...
DPA 0x380 â†’ Row=0, BG=7, Col=0x0
DPA 0x3C0 â†’ Row=0, BG=7, Col=0x0 (ê°™ì€ burst!)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DPA 0x400 â†’ Row=0, BG=0, Col=0x10 (Column ë³€í™”!)
```

### ì˜ˆì‹œ 3: March ì•Œê³ ë¦¬ì¦˜

```python
# March C-: â‡‘(w0, r0)
# Row ìˆœì„œëŒ€ë¡œ write-read

for row in range(max_row):
    for col in [0x0, 0x10, 0x20, ...]:
        dpa = dram_to_dpa(row=row, col=col, bg=0, ba=0)
        write(dpa, 0x00)
        read(dpa)
```

**ì‹¤ì œ DPA ìˆœì„œ:**

```
Row 0, Col 0x0   â†’ DPA 0x0
Row 0, Col 0x10  â†’ DPA 0x400  (+1KB)
Row 0, Col 0x20  â†’ DPA 0x800  (+1KB)
...
Row 1, Col 0x0   â†’ DPA 0x100000  (+1MB, row ë³€í™”!)
```

---

## ì™œ ì´ë ‡ê²Œ ë³µì¡í•œê°€?

### ì„¤ê³„ ëª©ì 

**1. ì„±ëŠ¥ ìµœì í™”**
```
Burst transfer â†’ ëŒ€ì—­í­ ìµœëŒ€ í™œìš©
Bank interleaving â†’ ë³‘ë ¬ ì²˜ë¦¬
Column encoding â†’ Sequential access ìµœì í™”
```

**2. ì „ë ¥ íš¨ìœ¨**
```
Row activateëŠ” ë¹„ì‹¸ë‹¤ (ì „ë ¥, ì‹œê°„)
â†’ í•œ ë²ˆ activateí•˜ë©´ ìµœëŒ€í•œ ë§ì´ ì½ì
â†’ Burst!
```

**3. ì œì¡° ìš©ì´ì„±**
```
ì¼ì •í•œ íŒ¨í„´ì˜ interleaving
â†’ í•˜ë“œì›¨ì–´ ë¡œì§ ë‹¨ìˆœí™”
â†’ ê²€ì¦ ìš©ì´
```

### ì¶”ìƒí™” ê³„ì¸µ

```
Application Layer
    â†“ (Virtual Address)
OS/MMU
    â†“ (Physical Address)
Memory Controller
    â†“ (DPA - Device Physical Address)
CXL Controller
    â†“ (DRAM Commands: ACT, RD, WR)
DRAM Chip
    â†“ (Row, BG, BA, Column)
Physical Cells
```

ê° ê³„ì¸µì´ ë³µì¡ì„±ì„ ìˆ¨ê¸°ì§€ë§Œ, ìš°ë¦¬ëŠ” **DPA â†” DRAM ë³€í™˜**ì„ ì§ì ‘ í•´ì•¼ í•¨!

---

## Truth Table ì‹œê°í™”

### ì „ì²´ ëª…ë ¹ íë¦„ë„

```
Application (devdax write)
    â†“ DPA 0x400

CXL Controller (ì£¼ì†Œ ë³€í™˜)
    â†“ Row=0, BG=0, BA=0, Col=0x10

Memory Controller (DRAM ëª…ë ¹ ìƒì„±)
    â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ACT Command                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  CA[13:0] = [Row, BG, BA]           â”‚
â”‚                                     â”‚
â”‚  0 0 H R R R R R BG BG BG BA BA R  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚         â†“ ì „ì†¡ (15ns)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DRAM Chip: Row 0 í™œì„±í™”
    â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WR Command (Cycle 0)               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  CA[13:0] = [1010AP0BL0, BG, BA, C] â”‚
â”‚                                     â”‚
â”‚  1 0 1 1 0 0 0 0 BG BG BG BA BA C  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚         â†“ ì „ì†¡                      â”‚
â”‚                                     â”‚
â”‚  WR Command (Cycle 1)               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  CA[9:0] = Column[11:2]             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚         â†“ ì „ì†¡ (2ns)                â”‚
â”‚                                     â”‚
â”‚  Data (128 bytes)                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  16 transfers Ã— 8 bytes             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚         â†“ ì „ì†¡ (8ns)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DRAM Chip: Col 0x10~0x1Fì— ë°ì´í„° ì €ì¥
```

### Command Timing Diagram

```
ì‹œê°„ â†’

         tRCD      tCL
         (15ns)    (10ns)
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚           â”‚         â”‚
ACT â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         â”‚
    â”‚           â”‚         â”‚
    â”‚           WR        â”‚
    â”‚           â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚
    â”‚           â”‚         â”‚
    â”‚           â”‚         Data Out
    â”‚           â”‚         â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚
    â”‚           â”‚         â”‚        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    Row         Column    Burst
    Activate    Access    Transfer

ì´ ì†Œìš” ì‹œê°„: ~33ns (ACT 15ns + WR 2ns + Data 8ns + margin 8ns)
```

### CA ì‹ í˜¸ íƒ€ì´ë°

```
Clock:  â–â–”â–â–”â–â–”â–â–”â–â–”â–â–”â–â–”â–â–”â–â–”â–â–”â–â–”â–â–”â–

CA[13]: â–â–â–â–â–”â–”â–”â–”â–”â–”â–”â–”â–â–â–â–â–â–â–â–â–â–â–â– (ACT=L, RD/WR=H)

CA[12]: â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â– (0)

CA[11]: â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–” (ACT=H, RD=H, WR=H)

CA[10]: â–â–â–â–â–â–â–â–â–â–â–â–â–”â–”â–”â–”â–”â–”â–”â–”â–â–â–â– (RD=L, WR=H)

...     (ë‚˜ë¨¸ì§€ CA ì‹ í˜¸)

DQ[63:0]: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (Data burst)
          â†‘                â†‘
          Idle             Write Data
```

## ì •ë¦¬

### Column Address í•µì‹¬ ìš”ì•½

| í•­ëª© | ê°’ | ì˜ë¯¸ |
|------|-----|------|
| **Burst Length** | 16 | 1íšŒ ì „ì†¡ ë°ì´í„° ê°œìˆ˜ |
| **1 Transfer** | 8 bytes | 64 bits |
| **1 Burst** | 128 bytes | 16 Ã— 8 |
| **BG ê°œìˆ˜** | 8 | Bank Group Interleaving |
| **Column Step** | 0x10 | Column ì¦ê°€ ë‹¨ìœ„ |
| **DPA per Column** | 1KB (0x400) | 128 bytes Ã— 8 BG |
| **Max Column** | 0x7FF (2047) | í•˜ì§€ë§Œ ì‹¤ì œë¡  128ê°œ ê°’ë§Œ ì‚¬ìš© |

### DPA ê³„ì‚° ê³µì‹ (ìš”ì•½)

```python
# Forward: DPA â†’ DRAM
row   = dpa // 0x100000                    # 1MB per row
subch = (dpa % 0x100000) // 0x80000        # 512KB per subch
ba    = (dpa % 0x80000) // 0x20000         # 128KB per BA
col   = ((dpa % 0x20000) // 0x400) * 0x10  # 1KB per column, ì¸ì½”ë”©!
bg    = (dpa % 0x400) // 0x80              # 128B per BG
dimm  = (dpa % 0x80) // 0x40               # 64B per DIMM

# Reverse: DRAM â†’ DPA
dpa = row * 0x100000         # Row contribution
    + subch * 0x80000        # Subchannel contribution
    + ba * 0x20000           # Bank contribution
    + (col // 0x10) * 0x400  # Column contribution (ë””ì½”ë”©!)
    + bg * 0x80              # Bank Group contribution
    + dimm * 0x40            # DIMM contribution
```

### ê¸°ì–µí•´ì•¼ í•  í•µì‹¬

1. **Columnì€ ë°”ì´íŠ¸ ì£¼ì†Œê°€ ì•„ë‹ˆë‹¤** - Burstì˜ ì‹œì‘ì !
2. **1 Burst = 128 bytes** - DDR5ì˜ ê¸°ë³¸ ì „ì†¡ ë‹¨ìœ„
3. **BG Interleaving** - ì—°ì† ì£¼ì†Œê°€ ë‹¤ë¥¸ BGì— ë¶„ì‚°
4. **Column 0x10 = DPA 1KB** - 128 bytes Ã— 8 BG

---

## ì°¸ê³  ìë£Œ

- **DPA_ADDRESS_MAPPING_EXPLAINED.md** - DPA ì „ì²´ ë§¤í•‘ ê°€ì´ë“œ
- **dpa_translator.py** - ì‹¤ì œ ë³€í™˜ êµ¬í˜„
- **DDR5 JEDEC Specification** - DRAM í‘œì¤€ ìŠ¤í™
- **CXL 3.0 Specification** - CXL ë©”ëª¨ë¦¬ í‘œì¤€

---

**ì‘ì„±ì¼**: 2025-11-17
**ë²„ì „**: 1.0
**ê²€ì¦**: CMM-D 128GB ì‹¤ì œ í•˜ë“œì›¨ì–´ ê¸°ì¤€
